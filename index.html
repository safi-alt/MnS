<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For You - Happy Valentine's Day</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600;700&family=Special+Elite&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <!-- SVG grain filter -->
    <svg style="display: none">
      <filter id="grain">
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.55"
          numOctaves="3"
          stitchTiles="stitch"
        />
      </filter>
    </svg>
  </head>
  <body>
    <!-- Film grain overlay -->
    <div class="grain" aria-hidden="true"></div>

    <!-- Floating hearts + envelopes background -->
    <canvas id="bg-canvas" aria-hidden="true"></canvas>

    <!-- Sparkle cursor trail canvas -->
    <canvas id="sparkle-canvas" aria-hidden="true"></canvas>

    <!-- ========== PHASE 1: PUZZLE ========== -->
    <section id="phase-puzzle" class="phase active">
      <div class="card vintage-card">
        <div class="stamp" aria-hidden="true">
          <span class="stamp-heart">&#9829;</span>
          <span class="stamp-text">2026</span>
        </div>
        <span class="tag">A little challenge for you</span>
        <h1>Unlock My Heart</h1>
        <p class="desc">
          Tap the letters in the right order to spell the magic word and unlock
          what's inside.
        </p>

        <div class="slots" id="slots">
          <span class="slot"></span>
          <span class="slot"></span>
          <span class="slot"></span>
          <span class="slot"></span>
        </div>

        <div class="tiles" id="tiles">
          <button class="tile" data-letter="L">L</button>
          <button class="tile" data-letter="O">O</button>
          <button class="tile" data-letter="V">V</button>
          <button class="tile" data-letter="E">E</button>
          <button class="tile" data-letter="X">X</button>
          <button class="tile" data-letter="U">U</button>
        </div>

        <div class="actions">
          <button id="clear-btn" class="btn outline">Clear</button>
          <button id="submit-btn" class="btn primary">Unlock</button>
        </div>

        <p id="feedback" class="feedback" aria-live="polite"></p>
      </div>
    </section>

    <!-- ========== PHASE 1.5: ENVELOPE OPEN ========== -->
    <section id="phase-envelope" class="phase">
      <div class="envelope-scene">
        <div class="envelope" id="envelope">
          <div class="env-back"></div>
          <div class="env-front"></div>
          <div class="env-letter">
            <p>Keep going...</p>
          </div>
          <div class="env-flap"></div>
        </div>
        <p class="env-hint">You unlocked the envelope!</p>
      </div>
    </section>

    <!-- ========== PHASE 2: HEART FILL ========== -->
    <section id="phase-heart" class="phase">
      <div class="heart-stage">
        <canvas id="heart-canvas"></canvas>
        <p class="fill-label" id="fill-label">Filling with love...</p>
      </div>
    </section>

    <!-- ========== PHASE 3: MESSAGE ========== -->
    <section id="phase-message" class="phase">
      <div class="card vintage-card msg-card">
        <div class="stamp" aria-hidden="true">
          <span class="stamp-heart">&#9829;</span>
          <span class="stamp-text">XOXO</span>
        </div>
        <span class="tag">You did it!</span>
        <h2>Happy Valentine's Day</h2>
        <p class="love-text" id="love-text"></p>
        <button id="letter-btn" class="btn primary">Open My Love Letter</button>
      </div>

      <!-- Reasons ticker -->
      <div class="ticker-wrap" aria-hidden="true">
        <div class="ticker" id="ticker"></div>
      </div>

      <!-- Love letter modal -->
      <div id="letter-modal" class="modal" aria-hidden="true">
        <div class="modal-body vintage-letter" role="dialog" aria-modal="true">
          <div class="wax-seal" aria-hidden="true">&#9829;</div>
          <button id="close-modal" class="modal-close" aria-label="Close">
            &times;
          </button>
          <h3>My Dearest Maryam,</h3>
          <p>
            Every single day I wake up grateful that you exist. You turned my
            ordinary world into something magical, and I will never stop being
            amazed by you.
          </p>
          <p>
            Thank you for being my comfort, my laughter, and my favourite reason
            to smile. No words could ever be enough, but here are a few: I love
            you endlessly.
          </p>
          <p>Happy Valentine's Day, sweetheart.</p>
          <p class="sign">Forever yours, Safi &hearts;</p>
          <!-- Cute girl face doodle -->
          <svg
            class="cute-girl"
            aria-hidden="true"
            viewBox="0 0 100 100"
            xmlns="http://www.w3.org/2000/svg"
          >
            <!-- Hair -->
            <ellipse cx="50" cy="48" rx="38" ry="42" fill="#3a1a10" />
            <!-- Side hair strands -->
            <ellipse cx="20" cy="62" rx="12" ry="22" fill="#3a1a10" />
            <ellipse cx="80" cy="62" rx="12" ry="22" fill="#3a1a10" />
            <!-- Face -->
            <ellipse cx="50" cy="48" rx="28" ry="30" fill="#fdd9b5" />
            <!-- Blush cheeks -->
            <ellipse
              cx="32"
              cy="56"
              rx="8"
              ry="5"
              fill="#f5a0a0"
              opacity="0.5"
            />
            <ellipse
              cx="68"
              cy="56"
              rx="8"
              ry="5"
              fill="#f5a0a0"
              opacity="0.5"
            />
            <!-- Eyes -->
            <ellipse cx="39" cy="46" rx="4.5" ry="5.5" fill="#2a1008" />
            <ellipse cx="61" cy="46" rx="4.5" ry="5.5" fill="#2a1008" />
            <!-- Eye sparkle -->
            <circle cx="41" cy="44" r="1.8" fill="#fff" />
            <circle cx="63" cy="44" r="1.8" fill="#fff" />
            <!-- Cute smile -->
            <path
              d="M42 58 Q50 66 58 58"
              stroke="#cc1133"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
            />
            <!-- Eyelashes -->
            <path
              d="M34 41 Q36 38 39 40"
              stroke="#2a1008"
              stroke-width="1"
              fill="none"
            />
            <path
              d="M61 40 Q64 38 66 41"
              stroke="#2a1008"
              stroke-width="1"
              fill="none"
            />
            <!-- Hair bow -->
            <circle cx="26" cy="32" r="5" fill="#cc1133" />
            <path d="M18 30 Q22 34 26 30 Q22 26 18 30Z" fill="#e83850" />
            <path d="M26 30 Q30 34 34 30 Q30 26 26 30Z" fill="#e83850" />
            <!-- Small heart on cheek -->
            <path
              d="M72 50 C72 49 71 48 70.5 48 C70 48 69.5 49 69.5 49.5 C69.5 49 69 48 68.5 48 C68 48 67 49 67 50 C67 51.5 69.5 53 69.5 53 C69.5 53 72 51.5 72 50Z"
              fill="#cc1133"
              opacity="0.6"
            />
          </svg>
          <div class="postmark" aria-hidden="true">
            <span>Valentine's Day</span>
            <span>Feb 14, 2026</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Music player widget -->
    <div class="music-widget" id="music-widget">
      <button class="music-btn" id="music-btn" aria-label="Play music">
        <span class="vinyl" id="vinyl">
          <span class="vinyl-label">&#9829;</span>
        </span>
        <span class="music-status" id="music-status">Play</span>
      </button>
      <span class="music-title">Raindance â€” Dave ft. Tems</span>
    </div>

    <!-- Local audio -->
    <audio id="song" src="raindance.mp3" preload="auto"></audio>

    <script src="script.js"></script>
  </body>
</html>
